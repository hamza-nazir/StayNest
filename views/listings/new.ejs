<% layout('/layouts/boilerplate') -%>

<div class="container py-3 py-md-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-8">
      <div class="card border-0 shadow-sm">
        <div class="card-body p-3 p-md-5">
          <h2 class="text-center mb-3 mb-md-4">Create New Listing</h2>
          
          <form class="needs-validation" id="form" action="/listings" method="post" novalidate enctype="multipart/form-data">
            
            <!-- Title Field -->
            <div class="mb-3 mb-md-4">
              <label for="title" class="form-label fw-semibold">Title</label>
              <div class="input-group has-validation">
                <span class="input-group-text"><i class="fas fa-heading"></i></span>
                <input required id="title" class="form-control py-2" type="text" name="Listings[title]" placeholder="Enter property title">
                <div class="invalid-feedback">Please provide a title</div>
              </div>
            </div>
            
            <!-- Description Field -->
            <div class="mb-3 mb-md-4">
              <label class="form-label fw-semibold" for="descp">Description</label>
              <div class="input-group has-validation">
                <span class="input-group-text"><i class="fas fa-align-left"></i></span>
                <textarea required id="descp" class="form-control py-2" name="Listings[description]" placeholder="Describe your property" rows="3"></textarea>
                <div class="invalid-feedback">Please provide a description</div>
              </div>
            </div>
            
            <!-- Image Upload -->
            <div class="mb-3 mb-md-4">
              <label class="form-label fw-semibold" for="img">Property Image</label>
              <div class="input-group has-validation">
                <span class="input-group-text"><i class="fas fa-camera"></i></span>
                <input required type="file" id="img" class="form-control py-2" name="Listings[image]" accept="image/*">
                <div class="invalid-feedback">Please upload an image</div>
              </div>
              <div class="form-text">Upload a high-quality photo of your property</div>
            </div>
            
            <!-- Price and Location Row -->
            <div class="row g-2 g-md-3 mb-3 mb-md-4">
              <div class="col-12 col-md-6">
                <label class="form-label fw-semibold" for="price">Price (â‚¹)</label>
                <div class="input-group has-validation">
                  <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                  <input required id="price" class="form-control py-2" type="number" name="Listings[price]" placeholder="Nightly rate">
                  <div class="invalid-feedback">Please enter a valid price</div>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label fw-semibold" for="loc">Location</label>
                <div class="input-group has-validation">
                  <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                  <input required id="loc" type="text" class="form-control py-2" name="Listings[location]" placeholder="Property location">
                  <div class="invalid-feedback">Please enter a location</div>
                </div>
              </div>
            </div>
            
            <!-- Country Select -->
            <div class="mb-3 mb-md-4">
              <label class="form-label fw-semibold" for="con">Country</label>
              <div class="input-group has-validation">
                <span class="input-group-text"><i class="fas fa-globe"></i></span>
                <select required id="con" class="form-select py-2" name="Listings[country]">
                  <option value="" disabled selected>Select Country</option>
                  <option value="India">India</option>
                  <option value="Pakistan">Pakistan</option>
                  <option value="United States">United States</option>
                  <option value="United Kingdom">United Kingdom</option>
                  <option value="Canada">Canada</option>
                  <option value="Australia">Australia</option>
                  <option value="Germany">Germany</option>
                  <option value="France">France</option>
                  <option value="Italy">Italy</option>
                  <option value="Spain">Spain</option>
                  <option value="Japan">Japan</option>
                  <option value="China">China</option>
                  <option value="Russia">Russia</option>
                  <option value="Brazil">Brazil</option>
                  <option value="Mexico">Mexico</option>
                  <option value="South Africa">South Africa</option>
                  <option value="United Arab Emirates">United Arab Emirates</option>
                  <option value="Saudi Arabia">Saudi Arabia</option>
                  <option value="Singapore">Singapore</option>
                  <option value="Malaysia">Malaysia</option>
                  <option value="Thailand">Thailand</option>
                  <option value="Indonesia">Indonesia</option>
                  <option value="Turkey">Turkey</option>
                  <option value="Egypt">Egypt</option>
                </select>
                <div class="invalid-feedback">Please select a country</div>
              </div>
            </div>
            
            <!-- Submit Button -->
            <div class="d-grid mt-3 mt-md-4">
              <button class="btn btn-primary py-2" type="submit">
                <i class="fas fa-plus-circle me-2"></i> Create Listing
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card {
    border-radius: 0.5rem;
  }
  .input-group-text {
    background-color: #f8f9fa;
    min-width: 42px;
    justify-content: center;
  }
  .form-control:focus, 
  .form-select:focus {
    border-color: #86b7fe;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.1);
  }
  .btn-primary {
    transition: all 0.3s ease;
  }
  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(13, 110, 253, 0.2);
  }
  .form-text {
    font-size: 0.85rem;
    color: #6c757d;
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .card-body {
      padding: 1.5rem;
    }
    textarea {
      rows: 3;
    }
    .input-group-text {
      padding: 0.375rem 0.5rem;
    }
  }
</style>

<script>
// Form validation
(() => {
  'use strict'
  const forms = document.querySelectorAll('.needs-validation')
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }
      form.classList.add('was-validated')
    }, false)
  })
})()
</script>